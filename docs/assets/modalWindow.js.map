{"version":3,"file":"modalWindow.js","sources":["../../JS/Header/modalWindow.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\r\n  const forms = document.querySelectorAll(\"form\");\r\n\r\n  forms.forEach((form) => {\r\n    const submitButton = form.querySelector(\".connectionBtn\");\r\n    if (submitButton) {\r\n      form.addEventListener(\"submit\", function (e) {\r\n        e.preventDefault();\r\n\r\n        const modal = document.querySelector(\".modal\");\r\n        if (modal) {\r\n          modal.style.display = \"block\";\r\n        }\r\n\r\n        const formData = new FormData(form);\r\n        const data = {};\r\n        formData.forEach((value, key) => {\r\n          data[key] = value;\r\n        });\r\n\r\n        fetch(\"http://localhost:4000/submit\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(data),\r\n        })\r\n          .then((response) => {\r\n            if (!response.ok) {\r\n              return response.json().then((err) => {\r\n                throw new Error(err.details || err.error || \"Ошибка при отправке формы\");\r\n              });\r\n            }\r\n            return response.json();\r\n          })\r\n          .then((data) => {\r\n            // Показываем сообщение об успехе\r\n            const successMessage = document.createElement(\"div\");\r\n            successMessage.className = \"success-message\";\r\n            successMessage.textContent = \"Форма успешно отправлена!\";\r\n            modal.appendChild(successMessage);\r\n\r\n            // Очищаем форму\r\n            form.reset();\r\n            // Не закрываем модальное окно автоматически\r\n          })\r\n          .catch((error) => {\r\n            // Показываем сообщение об ошибке\r\n            const errorMessage = document.createElement(\"div\");\r\n            errorMessage.className = \"error-message\";\r\n            errorMessage.textContent = \"Произошла ошибка при отправке формы\";\r\n            modal.appendChild(errorMessage);\r\n          });\r\n      });\r\n    }\r\n  });\r\n\r\n  // Обработчик для кнопки закрытия\r\n  const closeButtons = document.querySelectorAll(\".close, #closeModal\");\r\n  closeButtons.forEach((button) => {\r\n    button.addEventListener(\"click\", function () {\r\n      const modal = document.querySelector(\".modal\");\r\n      if (modal) {\r\n        modal.style.display = \"none\";\r\n        // Удаляем все сообщения при закрытии\r\n        const messages = modal.querySelectorAll(\".success-message, .error-message\");\r\n        messages.forEach((message) => message.remove());\r\n      }\r\n    });\r\n  });\r\n});\r\n"],"names":["form","e","modal","formData","data","value","key","response","err","successMessage","error","errorMessage","button","message"],"mappings":"AAAA,SAAS,iBAAiB,mBAAoB,UAAY,CAC1C,SAAS,iBAAiB,MAAM,EAExC,QAASA,GAAS,CACDA,EAAK,cAAc,gBAAgB,GAEtDA,EAAK,iBAAiB,SAAU,SAAUC,EAAG,CAC3CA,EAAE,eAAc,EAEhB,MAAMC,EAAQ,SAAS,cAAc,QAAQ,EACzCA,IACFA,EAAM,MAAM,QAAU,SAGxB,MAAMC,EAAW,IAAI,SAASH,CAAI,EAC5BI,EAAO,CAAA,EACbD,EAAS,QAAQ,CAACE,EAAOC,IAAQ,CAC/BF,EAAKE,CAAG,EAAID,CACtB,CAAS,EAED,MAAM,+BAAgC,CACpC,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAUD,CAAI,CACnC,CAAS,EACE,KAAMG,GACAA,EAAS,GAKPA,EAAS,OAJPA,EAAS,KAAI,EAAG,KAAMC,GAAQ,CACnC,MAAM,IAAI,MAAMA,EAAI,SAAWA,EAAI,OAAS,2BAA2B,CACvF,CAAe,CAGJ,EACA,KAAMJ,GAAS,CAEd,MAAMK,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,kBAC3BA,EAAe,YAAc,4BAC7BP,EAAM,YAAYO,CAAc,EAGhCT,EAAK,MAAK,CAEtB,CAAW,EACA,MAAOU,GAAU,CAEhB,MAAMC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,gBACzBA,EAAa,YAAc,sCAC3BT,EAAM,YAAYS,CAAY,CAC1C,CAAW,CACX,CAAO,CAEP,CAAG,EAGoB,SAAS,iBAAiB,qBAAqB,EACvD,QAASC,GAAW,CAC/BA,EAAO,iBAAiB,QAAS,UAAY,CAC3C,MAAMV,EAAQ,SAAS,cAAc,QAAQ,EACzCA,IACFA,EAAM,MAAM,QAAU,OAELA,EAAM,iBAAiB,kCAAkC,EACjE,QAASW,GAAYA,EAAQ,OAAQ,CAAA,EAEtD,CAAK,CACL,CAAG,CACH,CAAC"}