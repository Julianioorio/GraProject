{"version":3,"file":"modalWindow.js","sources":["../../JS/Header/modalWindow.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\n  const forms = document.querySelectorAll(\"form\");\n\n  forms.forEach((form) => {\n    const submitButton = form.querySelector(\".connectionBtn\");\n    if (submitButton) {\n      form.addEventListener(\"submit\", function (e) {\n        e.preventDefault();\n\n        const modal = document.querySelector(\".modal\");\n        if (modal) {\n          modal.style.display = \"block\";\n        }\n\n        const formData = new FormData(form);\n        const data = {};\n        formData.forEach((value, key) => {\n          data[key] = value;\n        });\n\n        fetch(\"http://localhost:4000/submit\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(data),\n        })\n          .then((response) => {\n            if (!response.ok) {\n              return response.json().then((err) => {\n                throw new Error(err.details || err.error || \"Ошибка при отправке формы\");\n              });\n            }\n            return response.json();\n          })\n          .then((data) => {\n            // Показываем сообщение об успехе\n            const successMessage = document.createElement(\"div\");\n            successMessage.className = \"success-message\";\n            successMessage.textContent = \"Форма успешно отправлена!\";\n            modal.appendChild(successMessage);\n\n            // Очищаем форму\n            form.reset();\n            // Не закрываем модальное окно автоматически\n          })\n          .catch((error) => {\n            // Показываем сообщение об ошибке\n            const errorMessage = document.createElement(\"div\");\n            errorMessage.className = \"error-message\";\n            errorMessage.textContent = \"Произошла ошибка при отправке формы\";\n            modal.appendChild(errorMessage);\n          });\n      });\n    }\n  });\n\n  // Обработчик для кнопки закрытия\n  const closeButtons = document.querySelectorAll(\".close, #closeModal\");\n  closeButtons.forEach((button) => {\n    button.addEventListener(\"click\", function () {\n      const modal = document.querySelector(\".modal\");\n      if (modal) {\n        modal.style.display = \"none\";\n        // Удаляем все сообщения при закрытии\n        const messages = modal.querySelectorAll(\".success-message, .error-message\");\n        messages.forEach((message) => message.remove());\n      }\n    });\n  });\n});\n"],"names":["form","e","modal","formData","data","value","key","response","err","successMessage","error","errorMessage","button","message"],"mappings":"AAAA,SAAS,iBAAiB,mBAAoB,UAAY,CAC1C,SAAS,iBAAiB,MAAM,EAExC,QAASA,GAAS,CACDA,EAAK,cAAc,gBAAgB,GAEtDA,EAAK,iBAAiB,SAAU,SAAUC,EAAG,CAC3CA,EAAE,eAAgB,EAElB,MAAMC,EAAQ,SAAS,cAAc,QAAQ,EACzCA,IACFA,EAAM,MAAM,QAAU,SAGxB,MAAMC,EAAW,IAAI,SAASH,CAAI,EAC5BI,EAAO,CAAE,EACfD,EAAS,QAAQ,CAACE,EAAOC,IAAQ,CAC/BF,EAAKE,CAAG,EAAID,CACtB,CAAS,EAED,MAAM,+BAAgC,CACpC,OAAQ,OACR,QAAS,CACP,eAAgB,kBACjB,EACD,KAAM,KAAK,UAAUD,CAAI,CAC1B,CAAA,EACE,KAAMG,GACAA,EAAS,GAKPA,EAAS,KAAM,EAJbA,EAAS,KAAI,EAAG,KAAMC,GAAQ,CACnC,MAAM,IAAI,MAAMA,EAAI,SAAWA,EAAI,OAAS,2BAA2B,CACvF,CAAe,CAGJ,EACA,KAAMJ,GAAS,CAEd,MAAMK,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,kBAC3BA,EAAe,YAAc,4BAC7BP,EAAM,YAAYO,CAAc,EAGhCT,EAAK,MAAO,CAEb,CAAA,EACA,MAAOU,GAAU,CAEhB,MAAMC,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAY,gBACzBA,EAAa,YAAc,sCAC3BT,EAAM,YAAYS,CAAY,CAC1C,CAAW,CACX,CAAO,CAEP,CAAG,EAGoB,SAAS,iBAAiB,qBAAqB,EACvD,QAASC,GAAW,CAC/BA,EAAO,iBAAiB,QAAS,UAAY,CAC3C,MAAMV,EAAQ,SAAS,cAAc,QAAQ,EACzCA,IACFA,EAAM,MAAM,QAAU,OAELA,EAAM,iBAAiB,kCAAkC,EACjE,QAASW,GAAYA,EAAQ,OAAM,CAAE,EAEtD,CAAK,CACL,CAAG,CACH,CAAC"}